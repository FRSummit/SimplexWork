<div id="afterpayModal" class="price-watch-modal">
  <div class="price-watch-modal-main-content">
    <div class="new-modal">
        <div class="header-section">
            <div class="icon-section">
                <img src="#$(ContentManager:price_watch_icon_white.png)!" alt="price-watch-icon">
            </div>
            <h1 class="price-watch-title">Price Watch</h1>
        </div>
        <a class="close-afterpay-modal">Close<span class="afterpay-close">&times;</span></a>
    </div>


<div class="watch-price-container-section"> 
  <h2 class="watch-price-header-section js-sentence">Singapore (SIN) to ...</h2>
</div>

<div class="main-content">
<form id="priceWatchForm">
  <p class="intro">Get email updates on the price of your flights</p>
  <div class="form-main-content-section">
  <div class="airport-name-section">
    <label class="label-section">Origin Airport<abbr title="Required">*</abbr></label>
    <input class="origin-airport-input-section" id="origin-airport" placeholder="" value="">
  </div>
  <div class="airport-name-section">
    <label class="label-section">Destination Airport<abbr title="Required">*</abbr></label>
    <input class="destination-airport-input-section" id="destination-airport" placeholder="" value="">
  </div>

  <div class="email_wrapper">
    <label class="label-section">Email <abbr title="Required">*</abbr></label>
    <input class="email-input-section" id="email" placeholder="example@email.com" value="">
  </div>
  <p class="limit_and_email_tag">Receive weekly updates on how prices are tracking, the latest deals and our famous sales. And if the price drops, we’ll send you an alert.<br><br>You can unsubscribe at any time. <a class="privacy-policy" href="http://www.jetstar.com/sg/en/privacy-policy" target="_blank">See our privacy policy</a></p>

<div class="passenger">
<div class="passenger_wrapper">
    <div class="select_wrapper">
      <div class="fake-select">
        <select class="select_wrapper-section" aria-labelledby="adults-tag">
            <option value="1" selected="">1 Adult</option>
            <option value="47">47 Adults</option>
            <option value="48">48 Adults</option>
            <option value="49">49 Adults</option>
            <option value="50">50 Adults</option>
        </select>
        <i class="icon-downarrow"></i>
        <div class="fake-select-text" aria-hidden="true">
            1 Adult
        </div>
      </div>
    </div>
    <div class="select_wrapper">
      <div class="fake-select">
        <select class="select_wrapper-section" aria-labelledby="children-tag">
            <option value="0" selected="">0 Children</option>
            <option value="1">1 Child</option>
            <option value="2">2 Children</option>
            <option value="3">3 Children</option>
            <option value="4">4 Children</option>
            <option value="5">5 Children</option>
        </select>
        <i class="icon-downarrow"></i>
        <div class="fake-select-text" aria-hidden="true">
            0 Children
        </div>
      </div>
    </div><div class="select_wrapper">
      <div class="fake-select">
        <select class="select_wrapper-section" aria-labelledby="infants-tag">
            <option value="0" selected="">0 Infants</option>
            <option value="1">1 Infant</option>
            <option value="2">2 Infants</option>
        </select>
        <i class="icon-downarrow"></i>
        <div class="fake-select-text" aria-hidden="true">
            0 Infants
        </div>
      </div>
    </div>
</div>
</div>
<div class="submit">
  <a class="btn btn-secondary flexible-dates-btn" href="#"><span>Choose dates</span></a>
  <a class="btn btn-secondary watch-price-btn" href="#"><span>Watch prices</span></a>
</div>
</div>
</form>
</div>

<div class="disclaimers" style="">
  <p>
    <strong>^Things you need to know:</strong>
	<br><br> 
	You are watching Starter fares, inclusive of taxes, fees and surcharges. Checked baggage not included but may be added for an additional fee.
	<br><br> 
	For booking in Singapore Dollars no Booking and Service Fee applies for bookings made through SingPost or with a Jetstar Voucher. A Booking and Service fee of $5.00-$10.00 SGD per passenger per flight applies for all other bookings.
	<br><br> 
	For bookings in other currencies different fees and payment options apply. 
	<br><br> 
	Unless otherwise stated fares are non-refundable, limited changes are permitted, charges apply.
	<br><br> Jetstar collects your personal information to enable us to process and administer your Price Watch alerts. We may also use it to improve customer service including by way of market research and to provide you with information about travel related products or services from Jetstar and other providers in accordance with our Privacy Policy. If you wish to find out more about our Privacy Policy and how to access your personal information, 
	<a href="http://www.jetstar.com/sg/en/privacy-policy" target="_blank">click here</a>. 
	By signing up to Price Watch alerts, you acknowledge that your personal information relating to your Price Watch alerts may be accessible to Jetstar’s related bodies corporate and other organisations to whom the airline grants system access to provide these services. You consent to this information being transferred to or from Australia for these purposes and you consent to Jetstar and its partners exchanging, using and disclosing your personal information. 
  </p>
</div>


  </div>
</div>

<style type="text/css">

.OP575 .new-modal {
    padding: 14px 0 4px;
    background-color: #ff5115;
    font-family: HelveticaNeueW01,Helvetica,Arial,sans-serif;
    font-size: 14px;
    color: #696a6c;
    text-align: center;
}

.OP575 .icon-section {
    display: inline-block;
}

.OP575 .price-watch-title {
    display: inline-block;
    /*vertical-align: top;*/
}

.OP575 h1.price-watch-title {
    line-height: 3.5rem;
    color: #fff; 
    font: 700 20px JetstarHappy,"Helvetica Neue",Roboto,Arial,sans-serif;
    margin-bottom: 0;
    vertical-align: text-bottom;
}


.OP575 .watch-price-container-section {
    text-align: center;
    font-family: HelveticaNeueW01,Helvetica,Arial,sans-serif;
    font-size: 14px;
    color: #696a6c;
}

.OP575 .watch-price-header-section {
    display: block;
    background: #434244;
    color: #fff;
    font-size: 14px;
    font-weight: 700;
    margin-top: 0;
    padding: 0px 15px 0px;
    width: 100%;
}

.OP575 .main-content {
    padding: 20px;
    padding-top: 0px;
    margin-top: -4px;
    padding-bottom: 0;
}

.OP575 .main-content form {
    width: 320px;
    margin: 0 auto;
    font-size: 14px;
    color: #696a6c;
}

.OP575 .form-main-content-section{
    padding-left: 32px;
    width: 90%;
}

.OP575 p.intro {
    text-align: center;
    margin-bottom: 8px;
    font-weight: 700;
    font-family: HelveticaNeueW01,Helvetica,Arial,sans-serif;
    font-size: 11px;
    color: #696a6c;}

.OP575 label.label-section {
    color: #696a6c; 
    display: block;
    font: normal 10px HelveticaNeueW01,Helvetica,Arial,sans-serif;
    margin-bottom: 4px;
    padding-top: 6px;
}

.OP575 abbr {color: #ff5115;}

.OP575 input.email-input-section, .OP575 input.origin-airport-input-section, .OP575 input.destination-airport-input-section {
    font-size: 11px;
    color: #696a6c;
    outline: 0;
    border-radius: 0;
    background: #fafafa;
    border: none;
    border-bottom: solid 1px #d5d6d7;
    padding: 4px 13px;
    width: 100%;
}

.OP575 .main-content .limit_and_email_tag {
    color: #696a6c; 
    text-align: left;
    font: normal 10px HelveticaNeueW01,Helvetica,Arial,sans-serif;
    margin: 12px 0 16px;
}

.OP575 a.privacy-policy {
    color: inherit;
    text-decoration: underline;
}

.OP575 .passenger {
    padding: 0 0 14px;
    text-align: left;
}

.OP575 .passenger_wrapper {
    margin-bottom: 10px;
}

.OP575 .select_wrapper {
    border-right: solid 10px #fff; */
    font-size: 14px;
    color: #696a6c;
    border-bottom: solid 1px #d5d6d7;
    margin-bottom: 10px;
    width: 32%;
    display: inline-block;
}

.OP575 .fake-select {
    position: relative;
}

.OP575 select.select_wrapper-section {
    cursor: pointer;
    opacity: 0;
    position: absolute;
    width: 100%;
    height: 32px;
    left: 0;
    top: 0;
    z-index: 2;
    border-style: none;
}

.OP575 .fake-select-text {
    padding-left: 10px;
    font-size: 11px;
    line-height: 30px;
}


.OP575 .disclaimers {
    bottom: 20px;
    height: 120px;
    overflow-y: scroll;
    margin: 9px 0px -20px;
    padding: 5px 16px;
    background: #f8f8f8;
    border-top: 1px solid #ccc;}

.OP575 .disclaimers p {
    color: #696a6c;
    font: 10px/11px HelveticaNeueW01,Helvetica,Arial,sans-serif;
    text-align: left;  
    padding-bottom: 1em;
}

.OP575 .disclaimers a {
    text-decoration: underline;
    color: #ff5115;
    cursor: pointer;}

.OP575 a.btn.btn-secoundary.flexible-dates-btn {
    text-align: center;
    font-size: 12px;
    background-color: #434244;
}

.OP575 a.btn.btn-secoundary.watch-price-btn
    background-color: #ff5115;
}

.OP575 .submit {
    text-align: center;
}

.OP575 .submit .btn {
    font-size: 12px;
    color: #fff;
    padding: 5px 15px;
    margin-bottom: 10px; 
    /*font: 800 14px HelveticaNeueW01,Helvetica,Arial,sans-serif;*/
    border-radius: 4px;
    border: none; 
    background-color: #434244;
    -webkit-appearance: none;
    outline: 0;
}

.OP575 .submit .btn:hover, .OP575 .submit .btn:focus{
    background-color: #ff5115;
    font-size: 12px;
    color: #fff;
    padding: 5px 15px;
    margin-bottom: 10px;
    border-radius: 4px;
    border: none; 
    -webkit-appearance: none;
    outline: 0;
}

.OP575 .icon-downarrow {
    -webkit-transform: rotate(225deg);
    display: inline-block;
    float: right;
    margin-top: 8px;
    border-right: 6px solid transparent;
    border-top: 6px solid #696a6c;
}



/*-------------------------*/
.OP575 .price-watch-modal-opener-banner-section{padding: 9px 12px 10px 12px; background-color: #f4f4f4; margin: 0 auto; text-align: center; margin-top: -22px; width: 34%; margin-bottom: 18px;}
.OP575 .price-watch-banner-image-section{/*float: left;*/ margin-right: 10px; display: inline-block;}
.OP575 .afterpay-text{color: #444; padding-top: 1px; display: inline-block;} 
.OP575 .afterpay-text p {margin-bottom: 0px; font-size: 14px; line-height: 24px; text-align: left;} 
.OP575 .pay-text{font-weight: bold;}
.OP575 .afterpay-text a {font-size: 14px; line-height: 24px; color: #0792fc;font-weight: bold;}

.OP575 .price-watch-modal {
    display: none; 
    position: fixed; 
    z-index: 999; 
    padding-top: 100px; 
    left: 0;
    top: 0;
    width: 100%; 
    height: auto;    
    overflow: auto; 
    background-color: rgba(0,0,0,.7);
    background: radial-gradient(ellipse farthest-corner,rgba(0,0,0,.5) 0,rgba(0,0,0,.7) 100%);
    bottom: 0;
    -webkit-transition: opacity .3s;
    transition: opacity .3s;
}

.OP575 .price-watch-modal-opener-btn {
    display: block;
    position: relative;
    left: 0;
    top: 0;
    width: 100%;
    height: auto;
}

.OP575 .price-watch-modal-main-content {
    background-color: #fefefe;
    margin: auto;
    /*padding: 20px;*/
    border: 1px solid #888;
    width: 37.4%;
    /*width: 100%;*/
}

.OP575 .price-watch-modal-main-content2 {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 1290px;
}


.OP575 .afterpay-close {
    color: #fff;
    float: right;
    font-size: 28px;
    font-weight: normal;
    padding-right: 16px;
}

.OP575 .afterpay-close:hover, .OP575 .afterpay-close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}

.OP575 .moreinfo-price-watch-banner-image-section{
    background-image: url(''); 
    height: 100px;
    background-position: center;
    background-repeat: no-repeat;
    margin-bottom: 10px;
}
.OP575 .moreinfo-modal-section{
    padding-left: 11%;
    padding-right: 11%;
    padding-bottom: 36px;
}

.OP575 .heading-title {
    font-size: 20px;
    font-weight: bold;
    color: #222222;
    text-align: center;
    margin-top: 12px;
    margin-bottom: 15px;
    line-height: 24px;
}
.OP575 .heading-title2{
    margin-bottom: 36px;
}
.OP575 .moreinfo-text p{text-align: center; font-size: 14px; line-height: 24px;}
.OP575 .subtitle-image {
    text-align: center;
    padding-bottom: 24px;
}
.OP575 .subtitle-image img {
    max-height: 36px;
}
.OP575 .heading-subtitle {
    text-align: center;
    color: #222222;
    font-weight: bold;
    font-size: 16px;
    line-height: 24px;
}
.OP575 .subtitle-text {
    font-size: 14px;
    text-align: center;
    line-height: 24px;
}
.OP575 .moreinfo-conditions {
    text-align: center;
    font-size: 14px;
    padding-top: 10px;
    line-height: 24px;
    padding-bottom: 48px;
}
.OP575 .moreinfo-conditions a{
    color: #007ddb;
}

.OP575 .moreinfo-btn-section{
    text-align: center;
}

.OP575 .moreinfo-btn-section .gotit-btn {
    border-radius: 8px;
    font-weight: 700;
    display: inline-block;
    line-height: 1.4;
    padding: 12px 80px;
    font-size: 1rem;
    background-color: #ff5115;
    border: 1px solid #ff5115;
    color: #fff;
}

.OP575 .flight-schedule__selected-currency.bookingcurrencycode{
    text-align: right;
}

.OP575 .header-section {
    display: inline-block;
    margin-right: -66px;
}

.OP575 .close-afterpay-modal {
    display: inline-block;
    float: right;
    color: #fff;
}

.OP575 .close-afterpay-modal:hover, .OP575 .close-afterpay-modal:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}

@media only screen and (min-width: 768px) and (max-width: 1150px){
.OP575 .price-watch-modal-main-content {width: 80%;}
}

@media only screen and (max-width: 767px)
{
  .OP575 .price-watch-modal-opener-banner-section{width: 100%; margin-bottom: 12px;}
  .OP575 .price-watch-modal-main-content { padding: 20px 4px; width: 100%;}
  .OP575 .price-watch-modal{padding-top: 0px; }
  .OP575 .moreinfo-modal-section {padding-left: 0;padding-right: 0;padding-bottom: 0px;}
  .OP575 .price-watch-banner-image-section{float: none; text-align: center; display: block;}
  .OP575 .afterpay-text{display: block;} 
  .OP575 .price-watch-modal-opener-btn { padding-top: 2px; padding-left: 5px; padding-right: 5px;}
  .OP575 .moreinfo-jetstar-image{
    background-image: url('');    
    height: 25px;
    background-repeat: no-repeat;
    background-position: center;
    margin-top: -32px;
    width: auto;
    margin-right: 20px;
    margin-left: 15px;
}

.OP575 .moreinfo-price-watch-banner-image-section{ 
    background-image: url(''); 
    height: 30px;
    margin-top: 24px;margin-bottom: 22px;
}
  .OP575 .heading-title {font-size: 16px; margin-top: 14px;}
  .OP575 .moreinfo-text p {font-size: 12px; line-height: 20px;}
  .OP575 .heading-title2 {margin-bottom: 27px;}
  .OP575 .subtitle-image {padding-bottom: 18px;}
  .OP575 .heading-subtitle {font-size: 14px;line-height: 20px;}
  .OP575 .subtitle-text {margin-bottom: 24px; font-size: 12px; line-height: 20px;}
  .OP575 .moreinfo-conditions {font-size: 12px;padding-top: 8px;padding-bottom: 31px; line-height: 20px;}
  .OP575 .moreinfo-btn-section .gotit-btn {border-radius: 6px; width: 100%;display: block; padding: 12px;margin-bottom: 2px;}
  .OP575 .afterpay-text p {text-align: center;}

}

/*----------------------------*/



.OP575 .valid-email{ border: 1px solid #00d400; background: #f4f4f4; }
.OP575 .invalid-email{ border: 1px solid red; background: #f4f4f4; }

.OP575 .disclaimers::-webkit-scrollbar-thumb {
    border-radius: 10px;
    background-color: #6c6c6b;
    border: 7px solid transparent;
    background-clip: padding-box;
    margin: 10px;
}

.OP575 .disclaimers::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 20px;
}




/**/

.OP575 .airport-name-section{
  position: relative;
}

.OP575 .autocomplete {
  position: relative;
  display: inline-block;
}

.OP575 .autocomplete-items {
  position: absolute;
  border: 1px solid #d4d4d4;
  border-top: none;
  border-bottom: none;
  z-index: 99;
  font-size: 11px;
  width: 100%
}

.OP575 .autocomplete-items div {
  padding: 5px 10px 5px 10px;
  cursor: pointer;
  background-color: #fff; 
  border-bottom: 1px solid #d4d4d4; 
}

.OP575 .autocomplete-items div:hover {
  background-color: #e9e9e9; 
}

.OP575 .autocomplete-active {
  background-color: DodgerBlue !important; 
  color: #ffffff; 
}
/**/
</style>

<script type="text/javascript">

  dom.addCss(css);

  window.jetstarOptimisation = window.jetstarOptimisation || {};
  window.jetstarOptimisation.AfterPayIt_FlightSelect_AU = (function(window, document) {

    var modal = document.getElementById('afterpayModal'), 
    cities = ["Adelaide (ADL)","Auckland (AKL)","Uluru (Ayers Rock) (AYQ)","Bangkok (BKK)","Buon Ma Thuot (BMV)","Brisbane (BNE)","Ballina Byron (BNK)","Jakarta (CGK)","Zhengzhou (CGO)","Christchurch (CHC)","Cairns (CNS)","Clark (CRK)","Sapporo (CTS)","Nha Trang (CXR)","Da Nang (DAD)","Da Lat (DLI)","Bali (Denpasar) (DPS)","Darwin (DRW)","Dunedin (DUD)","Fukuoka (FUK)","Haikou (HAK)","Hanoi (HAN)","Hobart (HBA)","Hat Yai (HDY)","Hayman Island (HIS)","Hong Kong (HKG)","Phuket (HKT)","Honolulu (HNL)","Hai Phong (HPH)","Hamilton Island (HTI)","Hue (HUI)","Osaka (KIX)","Medan - Kualanamu  (KNO)","Kagoshima (KOJ)","Kuala Lumpur (KUL)","Launceston (LST)","Sunshine Coast (MCY)","Mackay (MKY)","Manila (MNL)","Matsuyama (MYJ)","Nadi (NAN)","Napier (NPE)","New Plymouth (NPL)","Tokyo (Narita) (NRT)","Nelson (NSN)","Newcastle – Port Stephens (NTL)","Oita (OIT)","Okinawa (Naha) (OKA)","Gold Coast (OOL)","Penang (PEN)","Perth (PER)","Pekanbaru (PKU)","Palembang (PLM)","Palmerston North (PMR)","Phnom Penh (PNH)","Whitsunday Coast (PPP)","Phu Quoc (PQC)","Pleiku (PXU)","Rarotonga (RAR)","Yangon (RGN)","Ho Chi Minh City (SGN)","Singapore (SIN)","Surabaya (SUB)","Sydney (SYD)","Sanya (SYX)","Takamatsu (TAK)","Tuy Hoa (TBB)","Thanh Hoa (THD)","Townsville (TSV)","Quy Nhon (UIH)","Chu Lai (VCL)","Vinh (VII)","Wellington (WLG)","Wuhan (WUH)","Queenstown (ZQN)"],

    init = function () {
        addBodyClass();
        showPriceWatchOnPageLeave();
    },

    addBodyClass = function addBodyClass() {
      jQuery('body').addClass('OP575');
    },

    autocomplete = function autocomplete(inp, arr) {
  
      var currentFocus;
  
      inp.addEventListener("input", function(e) {
      var a, b, i, val = this.value;
      
      closeAllLists();
      
      if (!val) { return false;}
      currentFocus = -1;
      
      a = document.createElement("DIV");
      a.setAttribute("id", this.id + "autocomplete-list");
      a.setAttribute("class", "autocomplete-items");
      
      this.parentNode.appendChild(a);
      
      for (i = 0; i < arr.length; i++) {
        
        if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
          
          b = document.createElement("DIV");
          
          b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
          b.innerHTML += arr[i].substr(val.length);
          
          b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
          
          b.addEventListener("click", function(e) {
              
              inp.value = this.getElementsByTagName("input")[0].value;
              
              closeAllLists();
          });
          a.appendChild(b);
        }
      }
  });
  
  inp.addEventListener("keydown", function(e) {
      var x = document.getElementById(this.id + "autocomplete-list");
      if (x) x = x.getElementsByTagName("div");
      if (e.keyCode == 40) {
        
        currentFocus++;
        
        addActive(x);
      } else if (e.keyCode == 38) { //up
        
        currentFocus--;
        
        addActive(x);
      } else if (e.keyCode == 13) {
        
        e.preventDefault();
        if (currentFocus > -1) {
          
          if (x) x[currentFocus].click();
        }
      }
  });

  function addActive(x) {
    
    if (!x) return false;
    
    removeActive(x);
    if (currentFocus >= x.length) currentFocus = 0;
    if (currentFocus < 0) currentFocus = (x.length - 1);
    
    x[currentFocus].classList.add("autocomplete-active");
  }

  function removeActive(x) {
    
    for (var i = 0; i < x.length; i++) {
      x[i].classList.remove("autocomplete-active");
    }
  }

  function closeAllLists(elmnt) {
    
    var x = document.getElementsByClassName("autocomplete-items");
    for (var i = 0; i < x.length; i++) {
      if (elmnt != x[i] && elmnt != inp) {
        x[i].parentNode.removeChild(x[i]);
      }
    }
  }

  
  document.addEventListener("click", function (e) {
      closeAllLists(e.target);
  });

},

    validateEmail = function validateEmail(sEmail) {
        var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

        if (filter.test(sEmail)) {
            $(element).find("#email").addClass('valid-email');
            $(element).find("#email").removeClass('invalid-email');
            $(element).find(".errors").css("display","none");
            $(element).find("#email").css("border","1px solid #00d400", "background-color","#FFF");
            return true;
        }
        else {
            $(element).find("#email").removeClass('valid-email');
            $(element).find("#email").addClass('invalid-email');
            $(element).find(".errors").css("display","block");
            $(element).find("#email").css("border","1px solid red", "background-color","#FFF3F3");  
            return false;
        }
    },

    bindBlurEvent = function bindBlurEvent(element){
        $(element).find(".email-input-section").bind("blur", function(event, ui) { 
            validateEmail($(element).find('#email').val());
        });
    },

    onSubmitModal = function onSubmitModal() {
        $( "form#priceWatchForm" ).submit(function( event ) {
            site.scope.price_watch.submitPriceWatch();
        });
    },

    showPriceWatchOnPageLeave = function showPriceWatchOnPageLeave(){

        jQuery('.travel-hotbar').append(html);
        modal = document.getElementById('afterpayModal'),
        onSubmitModal();

        jQuery('.price-watch-modal-main-content').each(function(index, element){
            bindBlurEvent(element);
        });

        //console.log(site.scope.campaignTargeting.getOriginAirport());
        //console.log(site.scope.campaignTargeting.getDestinationAirport());

        autocomplete(document.getElementById("origin-airport"), cities);
        autocomplete(document.getElementById("destination-airport"), cities);



        $('.afterpay-close').click(function() {
            modal.style.display = "none";
        });

        $('.close-afterpay-modal').click(function() {
            modal.style.display = "none";
        });

        document.addEventListener("mouseleave", function(e){
            if( e.clientY < 0 )
            {
                modal.style.display = "block";
            }
        }, false);

    };

    return {
      init: init
    };

  }(window, document));

  window.jetstarOptimisation.AfterPayIt_FlightSelect_AU.init();

</script>